<h1>Listing posts</h1>

<%= content_tag('p', link_to('Back', :controller => 'staff', :action => 'menu')) %>

<table>
  <tr>
    <th>Created</th>
    <th>Title</th>
    <th>Author</th>
    <th>Categories</th>
    <th>Status</th>
    <th>Comments</th>
  </tr>

<% @posts.each do |post| %>
  <tr class="<%= cycle('row1','row2')%>">
    <td><%= post.created_at.strftime('%m/%d/%y %T:%m %p') %></td>
    <td><%= h(post.title) %></td>
    <td><%= h(post.author.displayname) if post.author %></td>
    <td><%= post.categories.collect { |cat| cat.name}.join(", ") %></td>
    <td><%= h(post.status) %></td>
    <td><%= post.comments_count %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure you want to permanently remove this post?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Post', new_post_path %>
